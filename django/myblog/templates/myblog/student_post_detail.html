{% extends 'myblog/student_base.html' %}
{% block content %}
<article class="mb-4">
  <div class="d-flex justify-content-between align-items-center">
    <div>
      {% if not post.published_date %}
        <span class="badge text-bg-warning">draft</span>
      {% endif %}
    </div>

    {% if user.is_authenticated %}
      <div class="btn-group btn-group-sm" role="group">
        {% if not post.published_date %}
          <a class="btn btn-outline-success" href="{% url 'post_publish' pk=post.pk %}">Publish</a>
        {% endif %}
        <a class="btn btn-outline-primary" href="{% url 'post_edit' pk=post.pk %}">‚úèÔ∏è</a>
        <a class="btn btn-outline-danger" href="{% url 'post_remove' pk=post.pk %}">üóëÔ∏è</a>
      </div>
    {% endif %}
  </div>

  <h3 class="mt-3">{{ post.title }}</h3>
  <div class="mt-2">{{ post.text|linebreaksbr }}</div>
</article>

<hr>

<div class="d-flex justify-content-between align-items-center">
  <h5 class="m-0">–ö–æ–º–µ–Ω—Ç–∞—Ä—ñ ({{ post.comments.count }})</h5>
  <a class="btn btn-sm btn-outline-secondary" href="{% url 'add_comment_to_post' pk=post.pk %}">–î–æ–¥–∞—Ç–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä</a>
</div>

<div class="mt-3">
  {% for c in comments %}
    <div class="border rounded p-2 mb-2">
      <div class="small text-muted">{{ c.created_date|date:"d.m.Y H:i" }}</div>
      <strong>{{ c.author }}</strong>
      <div>{{ c.text|linebreaks }}</div>

      {% if user.is_authenticated and not c.approved_comment %}
        <div class="mt-1">
          <a class="btn btn-sm btn-outline-success" href="{% url 'comment_approve' pk=c.pk %}">‚úì approve</a>
          <a class="btn btn-sm btn-outline-danger" href="{% url 'comment_remove' pk=c.pk %}">‚úó delete</a>
        </div>
      {% endif %}
    </div>
  {% empty %}
    <p>–©–µ –Ω–µ–º–∞—î –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤.</p>
  {% endfor %}
</div>
{% endblock %}
